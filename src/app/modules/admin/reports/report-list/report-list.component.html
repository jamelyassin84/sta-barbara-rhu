<ng-container *ngIf="(loader$ | async)?.getLoader as loader">
    <div
        *ngIf="loader !== 'idle' || !ready"
        class="flex items-center justify-center w-full p-10 bg-white"
    >
        <app-spinner />
    </div>

    <div
        *ngIf="loader === 'idle' && ready"
        class="flex flex-col flex-auto p-6 px-5 mb-5 overflow-hidden sm:col-span-6 bg-card"
    >
        <div class="flex flex-col flex-auto h-full mt-5 overflow-x-auto">
            <table class="overflow-y-visible min-w-240">
                <thead class="text-right uppercase">
                    <tr class="bg-gray-100">
                        <th class="px-4 text-left text-gray-700">Bracket</th>
                        <th class="px-4 text-left text-gray-700">
                            Total Patients
                        </th>
                        <th class="px-4 text-left text-gray-700">
                            Total Males
                        </th>
                        <th class="px-4 text-left text-gray-700">
                            Total Females
                        </th>
                        <th class="px-4 text-left text-gray-700">
                            Total Diagnosed
                        </th>
                        <th class="px-4 text-left text-gray-700">
                            Diagnosed Males
                        </th>
                        <th class="px-4 text-left text-gray-700">
                            Diagnosed Females
                        </th>
                    </tr>
                </thead>
                <tbody [@listAnimation]="ageGroups.length">
                    <tr
                        *ngFor="let ageGroup of ageGroups; let i = index"
                        [ngClass]="{
                            'font-bold bg-teal-100': i === ageGroups.length - 1
                        }"
                        class="border-t border-gray-100 hover:bg-slate-100"
                    >
                        <td class="px-4">{{ ageGroup.bracket }}</td>
                        <td class="px-4">{{ ageGroup.totalPatients }}</td>
                        <td class="px-4">{{ ageGroup.males }}</td>
                        <td class="px-4">{{ ageGroup.females }}</td>
                        <td class="px-4">{{ ageGroup.totalDiagnosed }}</td>
                        <td class="px-4">{{ ageGroup.diagnosedMale }}</td>
                        <td class="px-4">{{ ageGroup.diagnosedFemale }}</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</ng-container>

<ng-container *ngIf="patients$ | async"></ng-container>
